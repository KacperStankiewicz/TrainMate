<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.4.xsd">

    <changeSet id="Tm51 create email template table" author="kstankiewicz">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="email_template"/>
            </not>
        </preConditions>

        <createTable tableName="email_template">
            <column name="id" type="bigint">
                <constraints primaryKey="true" primaryKeyName="pk_email_template_id" nullable="false"/>
            </column>
            <column name="type" type="varchar(64)">
                <constraints unique="true" uniqueConstraintName="email_template_type_unique"/>
            </column>
            <column name="subject" type="varchar(255)"/>
            <column name="content" type="text"/>
        </createTable>

        <createSequence sequenceName="seq_email_template" startValue="1" incrementBy="1"/>
    </changeSet>

    <changeSet id="Tm57 add email templates" author="kstankiewicz">
        <preConditions>
            <tableExists tableName="email_template"/>
        </preConditions>

        <sql>
            INSERT INTO email_template (id, type, subject, content)
            VALUES (nextval('seq_email_template'), 'PERIODICAL_REPORT_NOTIFICATION', 'Przypomnienie o uzupełnieniu raportu',
                    '<![CDATA[<html> <body> <div id="mailContainer" width="600px"> <div class="mailContent"> <div id="mailContent"> <p>Hello</p> <p>We remind you to complete the report from the last training cycle.</p> <p>To do this, click the link below or go to the TrainMate website in the <b>reports</b> tab.</p> <p><a href="localhost:8123">localhost:8123</a></p> <p>This message was automatically generated by the TrainMate system. Please do not reply.</p> </div> </div> </div> </body> </html>]]>'),
                   (nextval('seq_email_template'), 'WEEKLY_REPORT_NOTIFICATION', 'Przypomnienie o uzupełnieniu raportu',
                    '<![CDATA[<html> <body> <div id="mailContainer" width="600px"> <div class="mailContent"> <div id="mailContent"> <p>Hello</p> <p>We remind you to complete the report from the last week.</p> <p>To do this, click the link below or go to the TrainMate website in the <b>workout plan</b> tab.</p> <p><a href="localhost:8123">localhost:8123</a></p> <p>This message was automatically generated by the TrainMate system. Please do not reply.</p> </div> </div> </div> </body> </html>]]>')

        </sql>
    </changeSet>
</databaseChangeLog>